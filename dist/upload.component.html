<md-content>
	<div class="layout-padding" layout="column">
		<div>
			<div flex="100">
				<h3>Choose project to upload data to</h3>
				<md-select ng-model="UploadController.selected_project" aria-label="project">
					<md-optgroup label="projects">
						<md-option ng-repeat="item in UploadController.projects" ng-value="item.value">{{item.display}}
						</md-option>
					</md-optgroup>
				</md-select>
			</div>
			<h3>Choose one or more csv text files to upload and hit the submit button. Files are inspected for syntax
				and organization prior to upload.</h3>
		</div>

		<div ng-repeat="item in UploadController.data" layout="row" layout-padding layout-wrap>
			<div flex="100"><h4>{{item.what}}</h4></div>

			<div flex="100" ng-repeat="inputFile in UploadController.data[item.what].order" layout-column>
				<div flex>
					<md-icon ng-if="UploadController.data[item.what].status == 'ok'" md-font-set="material-icons"> done
					</md-icon>
					<md-icon ng-if="UploadController.data[item.what].status == 'ng'" md-font-set="material-icons"> error
					</md-icon>
					<md-icon ng-if="UploadController.data[item.what].status == 'na'" md-font-set="material-icons">
						attach_file
					</md-icon>
					{{UploadController.data[item.what].files[inputFile].name}}
					<i ng-if="UploadController.data[item.what].status == 'ng'">upload failed, see issues at bottom
						of page</i>
				</div>
				<div>
					<md-button ngf-select="UploadController.setFile($file, item.what, inputFile)">
						choose file
					</md-button>
					<md-button ng-click="UploadController.showHelpAlert(inputFile)">file schema..</md-button>
				</div>

			</div>

		</div>

		<div layout="row">
			<md-button class="md-primary" ng-click="UploadController.submit()">submit</md-button>
			<md-button ng-click="UploadController.clear()">clear</md-button>
		</div>

		<md-progress-linear ng-if="UploadController.isWaiting" md-mode="indeterminate"></md-progress-linear>

		<div ng-repeat="item in UploadController.data">
			<div ng-if="UploadController.data[item.what].status == 'ng'">
				<h3>Submitted {{item.what}} data has some issues..</h3>
				<table>
					<tr ng-repeat="err in UploadController.data[item.what].response.tables[0].errors">
						<td>{{err.message}}</td>
					</tr>
				</table>
			</div>
		</div>
	</div>
</md-content>
